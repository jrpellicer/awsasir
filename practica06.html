
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="practica05.html">
      
      
      
      <link rel="icon" href="images/cloud-computing.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Aplicaciones Web con BeanStalk - Prácticas en AWS para ASIR</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aplicaciones-web-con-elastic-beanstalk" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="index.html" title="Prácticas en AWS para ASIR" class="md-header__button md-logo" aria-label="Prácticas en AWS para ASIR" data-md-component="logo">
      
  <img src="images/cloud-computing.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prácticas en AWS para ASIR
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Aplicaciones Web con BeanStalk
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="light-blue"  aria-label="Cambiar a modo noche"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="light-blue"  aria-label="Cambiar a modo día"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo día" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Prácticas en AWS para ASIR" class="md-nav__button md-logo" aria-label="Prácticas en AWS para ASIR" data-md-component="logo">
      
  <img src="images/cloud-computing.png" alt="logo">

    </a>
    Prácticas en AWS para ASIR
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="practica00.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lanzamiento del Laboratorio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="practica01.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creación de MV
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Redes Virtuales
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Redes Virtuales
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="practica03.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Redes Virtuales
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="faqredes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bases de Datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Bases de Datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="practica04.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base de datos pública
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="practica05.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base de datos privada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Despliegue web con Beanstalk
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="practica06.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Despliegue web con Beanstalk
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo-del-proyecto" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo del Proyecto
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esquema-en-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Esquema en AWS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-a-realizar" class="md-nav__link">
    <span class="md-ellipsis">
      Práctica a Realizar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Práctica a Realizar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-de-la-vpc" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de la VPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-la-aplicacion-con-elastic-beanstalk" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de la aplicación con Elastic Beanstalk
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprobacion-del-funcionamiento" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobación del funcionamiento
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#carga-de-nuestro-codigo" class="md-nav__link">
    <span class="md-ellipsis">
      Carga de nuestro código
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conexion-a-una-bbdd" class="md-nav__link">
    <span class="md-ellipsis">
      Conexión a una BBDD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modificacion-del-codigo" class="md-nav__link">
    <span class="md-ellipsis">
      Modificación del código
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eliminacion-de-los-recursos-creados" class="md-nav__link">
    <span class="md-ellipsis">
      Eliminación de los recursos creados
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo-del-proyecto" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo del Proyecto
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esquema-en-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Esquema en AWS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practica-a-realizar" class="md-nav__link">
    <span class="md-ellipsis">
      Práctica a Realizar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Práctica a Realizar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-de-la-vpc" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de la VPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-la-aplicacion-con-elastic-beanstalk" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de la aplicación con Elastic Beanstalk
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprobacion-del-funcionamiento" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobación del funcionamiento
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#carga-de-nuestro-codigo" class="md-nav__link">
    <span class="md-ellipsis">
      Carga de nuestro código
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conexion-a-una-bbdd" class="md-nav__link">
    <span class="md-ellipsis">
      Conexión a una BBDD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modificacion-del-codigo" class="md-nav__link">
    <span class="md-ellipsis">
      Modificación del código
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eliminacion-de-los-recursos-creados" class="md-nav__link">
    <span class="md-ellipsis">
      Eliminación de los recursos creados
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="aplicaciones-web-con-elastic-beanstalk">Aplicaciones web con Elastic Beanstalk</h1>
<h2 id="objetivo-del-proyecto">Objetivo del Proyecto</h2>
<p>En esta práctica vamos a desplegar una aplicación web de manera totalmente gestionada mediante Elastic Beanstalk, un servicio PaaS que nos ofrece AWS para para implementar y escalar aplicaciones y servicios web. Únicamente hemos de encargarnos de subir el código y Elastic Beanstalk administrará de manera automática la implementación, desde el aprovisionamiento de la capacidad, el equilibrio de carga y el escalado automático hasta la supervisión del estado de la aplicación.</p>
<p>AWS Elastic Beanstalk admite aplicaciones web escritas en varios lenguajes y marcos populares. No necesita cambios de código, o muy pocos, para pasar de la máquina de desarrollo a la nube. Las opciones de desarrollo para implementar aplicaciones web son Java, .NET, Node.js, PHP, Ruby, Python, Go y Docker, entre otras.</p>
<h2 id="esquema-en-aws">Esquema en AWS</h2>
<p><img src="images/Beanstalk.drawio.png"></p>
<h2 id="practica-a-realizar">Práctica a Realizar</h2>
<p>1.- Eliminamos la <em>VPC predeterminada</em> y nos aseguramos que no hay ningún recurso creado en anteriores prácticas (grupos de seguridad, NAT Gateway, instancias EC2, bases de datos, ...)</p>
<p><br></p>
<hr />
<h3 id="creacion-de-la-vpc">Creación de la VPC</h3>
<p>2.- Creamos una nueva VPC con la siguientes características:</p>
<ul>
<li>Debe tener 2 AZs.</li>
<li>2 Subredes públicas, cada una en una AZ.</li>
<li>No es necesario un <em>Gateway NAT</em> ni un <em>Gateway de S3</em></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Aunque no usemos Multi-AZ, vamos a crear 2 zonas de disponibilidad por si añadimos una base de datos RDS en nuestra aplicación. Como ya sabemos, AWS requiere al menos dos subredes privadas en diferentes AZ para RDS.</p>
</div>
<p><br></p>
<hr />
<h3 id="creacion-de-la-aplicacion-con-elastic-beanstalk">Creación de la aplicación con Elastic Beanstalk</h3>
<p>3.- Accede al servicio <strong>Elastic Beanstalk</strong> y <strong>Crea una aplicación</strong>:</p>
<ul>
<li>El entorno será un servidor web.</li>
<li>Le asignamos un nombre, por ejemplo <em>WebAsir</em></li>
<li>En el tipo de plataforma sobre la que va a correr nuestra aplicación seleccionamos <strong>PHP</strong>, puesto que será una aplicación web que correrá en ese entorno de programación.</li>
<li>En el código de la aplicación dejamos de momento la <em>Aplicación de ejemplo</em>.</li>
<li>Necesitamos especificar un Rol de acceso al servicio. Seleccionamos el existente del laboratorio <em>LabRole</em>.</li>
<li>En el par de claves necesario para la máquina sobre la que correrá seleccionamos también el del laboratorio <em>vockey</em>.</li>
<li>En el perfil de instancia de EC2, seleccionamos <em>LabInstanceProfile</em>.</li>
<li>La VPC será la creada en el paso anterior.</li>
<li>En el apartado subredes de instancia seleccionamos las 2 subredes creadas.</li>
<li>Los demás campos los dejamos sin marcar (no creamos ninguna BBDD ni asignamos IP Pública)</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Podríamos haber creado aquí una Base de Datos que se conecte a la aplicación, pero no lo hacemos en este momento. Veremos cómo conectar más tarde una BBDD que ya esté creada.</p>
</div>
<p><br></p>
<hr />
<h3 id="comprobacion-del-funcionamiento">Comprobación del funcionamiento</h3>
<p>4.- Una vez lanzado el entorno correctamente y cuando su estado aparezca <em>Ok</em>, comprobamos su Dominio y lo abrimos en el navegador (simplemente haciendo click encima) para comprobar que todo funciona. Nos debe aparecer una web con el código de ejemplo en la que aparece <em>Congratulations!</em></p>
<p><img src="images/Beanstalk_1.jpg"></p>
<p><br></p>
<hr />
<h3 id="carga-de-nuestro-codigo">Carga de nuestro código</h3>
<p>Esel momento de cargar un código propio a nuestra aplicación de Beanstalk. Vamos a utilizar en esta práctica un código HTML + PHP que se encuentra en el repositorio <a href="https://github.com/jrpellicer/asirweb">https://github.com/jrpellicer/asirweb</a></p>
<p>5.- Accedemos al repositorio de GitHub y en el botón de <code>Code</code> pulsamos sobre <strong>Download ZIP</strong></p>
<div class="admonition warning">
<p class="admonition-title">Atención</p>
<p>Para subir la aplicación a Beanstalk necesitamos un fichero <code>.zip</code> (o un fichero <code>.tar.gz</code>) pero no nos vale el que acabamos de descargar. El descargado contiene una carpeta con los archivos de la página web en ella, pero Beanstalk necesita que los archivos estén en la raíz del fichero <code>.zip</code> (sin carpeta).</p>
</div>
<p><br></p>
<hr />
<p>6.- Una vez descargado el código vamos a descomprimir el archivo para después volver a comprimirlo, pero sin incluir los archivos en ninguna carpeta comprimida.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Windows</label><label for="__tabbed_1_2">Linux</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ol>
<li>Extrae el ZIP en una carpeta.</li>
<li>Selecciona los archivos dentro de la carpeta extraída.</li>
<li>Haz clic derecho y elige "Enviar a &gt; Carpeta comprimida".</li>
</ol>
</div>
<div class="tabbed-block">
<ol>
<li>Sitúate en la carpeta donde se ha descargado el archivo.</li>
<li>Descomprime el archivo: <code>unzip asirweb-main.zip</code></li>
<li>Sitúate en el directorio creado al descomprimir: <code>cd asirweb-main</code></li>
<li>Vuelve a comprimir seleccionando todos los ficheros: <code>zip -r ../codigo.zip *</code></li>
<li>Nos ha dejado en el directorio padre un fichero llamado <em>codigo.zip</em> listo para ser subido.</li>
</ol>
</div>
</div>
</div>
<p><br></p>
<hr />
<p>7.- Volvemos a la consola de AWS y en la pantalla de nuestro Entorno de la aplicación de Beanstalk pulsamos sobre el botón <strong>Cargar e implementar</strong>.</p>
<p><img src="images/Beanstalk_2.jpg"></p>
<p><br></p>
<hr />
<p>8.- Subimos el archivo <code>.zip</code> con nuestro código generado en el paso anterior e implementamos.</p>
<p>Esperamos a que se actualice el entorno y accedemos al dominio web para comprobar los cambios.</p>
<p><br></p>
<hr />
<h3 id="conexion-a-una-bbdd">Conexión a una BBDD</h3>
<p>Es bastante probable que en nuestros proyectos web deseemos conectar una base de datos para interactuar con ella. Si accedemos a nuestra página web cargada, veremos que hay un botón que pone <code>Ver Listado</code> que da error al pulsarlo, pues ejecuta un código PHP que se conecta a una base de datos que no existe.</p>
<p>El primer paso será crear una BBDD RDS.</p>
<p>6.- Accedemos a la consola de RDS y creamos una Base de Datos:</p>
<ul>
<li>Seleccionamos el método de <em>creación estándar</em>.</li>
<li>Como motor de base de datos elegimos <strong>MySQL</strong>.</li>
<li>La plantilla sobre la que se va a basar será la <em>Capa gratuita</em> (las demás no son aptas para el laboratorio).</li>
<li>Ponemos un nombre de servidor que debe ser único en nuestra cuenta de AWS.</li>
<li>Asignamos nombre de usuario administrador y su contraseña.</li>
<li>Dejamos las opciones por defecto del tamaño de la instancia y el almacenamiento.</li>
<li>En el apartado <strong>Conectividad</strong>:<ul>
<li>Seleccionamos la VPC en la que está ubicado nuestro proyecto de Beanstalk.</li>
<li>Permitimos el <em>Acceso Público</em> a nuestra BBDD (para poder conectarnos desde nuestra máquina local y cargar datos).</li>
<li>Elegimos como <em>grupo de seguridad</em>, el existente por defecto. </li>
</ul>
</li>
<li>Los demás campos los dejamos por defecto.</li>
</ul>
<p><br></p>
<hr />
<p>7.- Accedemos al <em>Grupo de seguridad</em> asociado a la base de datos y editamos las reglas de entrada para permitir el acceso al puerto MYSQL/Aurora (3306) desde todas las direcciones (0.0.0.0/0)</p>
<p><br></p>
<hr />
<p>8.- En nuestra máquina local nos conectamos a la base de datos mediante el comando <code>mysql</code> y comprobamos la conexión.</p>
<p><br></p>
<hr />
<p>9.- Vamos a crear una base de datos con una tabla. Lo vamos a hacer mediante un script de sentencias sql. Para ello comenzamos con la descarga del fichero de creación de la base de datos.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Linux</label><label for="__tabbed_2_2">Windows</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>wget https://raw.githubusercontent.com/jrpellicer/awsasir/refs/heads/main/docs/asir.sql
</code></pre></div>
</div>
<div class="tabbed-block">
<p><a href="asir.sql">Descarga fichero sql</a></p>
</div>
</div>
</div>
<p><br></p>
<hr />
<p>8.- Ejecutamos las instrucciones SQL que hay en el contenido del fichero descargado. Basta con redireccionar la entrada del comando <code>mysql</code> con el fichero descargado de nombre <code>asir.sql</code>.</p>
<div class="highlight"><pre><span></span><code>mysql -h database-jrpm.cruqs8qiedha.us-east-1.rds.amazonaws.com -u admin -p &lt; asir.sql
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Atención</p>
<p>Una vez creadas las tablas y los datos de la base de datos, podríamos modificar las reglas de entrada del grupo de seguridad para eliminar el acceso desde Internet al puerto 3306.</p>
</div>
<p><br></p>
<hr />
<p>Una vez creada la base de datos, vamos a enlazarla con la aplicación de Beanstalk mediante el paso de variables de entorno con los datos de la base de datos que acabamos de crear (Host, Puerto, Usuario, Contraseña y Nombre de la BD).</p>
<p>9.- Accedemos a la consola de Beanstalk y seleccionamos nuestro entorno.</p>
<p><br></p>
<hr />
<p>10.- En el panel de navegación seleccionamos <em>Configuración</em>:</p>
<ul>
<li>En la categoría de configuración <em>Actualizaciones, monitoreo y registro</em>, seleccionamos <em>Editar</em>.</li>
<li>En la sección <em>Propiedades del entorno</em> (la última) definimos las variables (<em>propiedades</em>) que leerá la aplicación para crear la cadena de conexión. Hay que mantener los nombres y poner su correspondiente valor:<ul>
<li>RDS_HOSTNAME</li>
<li>RDS_PORT</li>
<li>RDS_DB_NAME</li>
<li>RDS_USERNAME</li>
<li>RDS_PASSWORD</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El valor de cada variable será el definido en la base de datos RDS que hemos creado. <em>RDS_HOSTNAME</em> será la cadena de conexión. <em>RDS_PORT</em> será el 3306, <em>RDS_DB_NAME</em> será <em>webasir</em> (se ha creado en el script) y los demás datos serán los que hayamos definido en el momento de la creación.</p>
</div>
<p><img src="images/Beanstalk_3.jpg"></p>
<p><br></p>
<hr />
<h3 id="modificacion-del-codigo">Modificación del código</h3>
<p>Una vez definidas las variables de entorno con sus valores es momento de utilizarlas en la página <em>listado.php</em>.</p>
<p>11.- En la máquina local nos situamos en el directorio donde habíamos descomprimido el código fuente de nuestra aplicación y con un editor accedemos al fichero <code>listado.php</code>.</p>
<p><br></p>
<hr />
<p>12.- Modificamos las líneas del código de las variables de conexión para que utilicen las variables de entorno creadas:</p>
<p><img src="images/Beanstalk_4.jpg"></p>
<p><br></p>
<hr />
<p>13.- Volvemos a crear el archivo zip y lo subimos al entorno.</p>
<p><br></p>
<hr />
<p>14.- Comprobamos que la aplicación accede a la base de datos y ya funciona el listado.</p>
<h3 id="eliminacion-de-los-recursos-creados">Eliminación de los recursos creados</h3>
<p>Una vez comprobada la conexión, para finalizar la práctica eliminamos los recursos creados.</p>
<p>8.- Desde la consola de AWS, <strong>elimina el servidor de BBDD creado para asegurarnos que no dejamos ningún recurso consumiendo crédito</strong>. No crees ninguna instantánea final ni conserves las copias de seguridad.</p>
<div class="admonition warning">
<p class="admonition-title">Atención</p>
<p>Si detenemos un servidor de BBDD (sin eliminarlo), AWS lo iniciará automáticamente a los 7 días (si no lo hemos levantado nosotros de manera manual antes). Esto es peligroso, pues si olvidamos eliminar un recurso de BBDD que no utilizamos, se pondrá en marcha automáticamente a los 7 días de haberlo detenido, con el consiguiente consumo de crédito.</p>
</div>
<p><img src="./images/BBDD_03.png" width=400></p>
<p><br></p>
<hr />
<p>9.- Desde la consola de AWS, <strong>elimina la aplicación de Elastic Beanstalk</strong>. </p>
<p>Al eliminar la aplicación se terminará el entorno sobre el que corre.</p>
<p><br></p>
<hr />
<p>10.- Desde la consola de AWS, <strong>elimina la VPC</strong>. </p>
<p><br></p>
<hr />







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pie" >
        
          
          <a href="practica05.html" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Base de datos privada">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Anterior
              </span>
              <div class="md-ellipsis">
                Base de datos privada
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["header.autohide", "navigation.top", "navigation.tracking", "navigation.footer", "navigation.indexes", "content.code.annotate", "announce.dismiss", "toc.follow", "content.code.copy"], "search": "assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>